logic for mac instructions will be posted in the comments